apiVersion: v1
kind: Pod
metadata:
  name: vicsnf-gwanak
  annotations:
    default_ip: "10.10.9.111"
    k8s.v1.cni.cncf.io/networks: '[
      {"name": "kuryr-ndn-11", "ips": ["10.10.11.101"]},
      {"name": "kuryr-ndn-20", "ips": ["10.10.20.111"]},
      {"name": "kuryr-ndn-15", "ips": ["10.10.15.101"]},
      {"name": "kuryr-ndn-16", "ips": ["10.10.16.101"]}
    ]'
spec:
  containers:
  - name: vicsnf-gwanak
    image: 192.168.103.250:5000/nfd_grpc_base:1.0
    env:
    - name: LC_ALL
      value: C.UTF-8
    - name: vICSNF_ALIAS
      value: 'gwanak'
    - name: vICSNF_MGMTIP
      value: '127.0.0.1'
    - name: vICSNF_MGMTPORT
      value: '50051'
    - name: vICSNF_SITENAME
      value: 'korea\\/seoul\\/gwanak'
    - name: vICSNF_ROUTERNAME
      value: 'R1'
    - name: vICSNF_NEIGHBOR_HOSTNAME
      value: 'korea:dongjak:gwanak_pf:gwanak_h'
    - name: vICSNF_NEIGHBOR_IP
      value: '10.10.11.100:10.10.20.110:10.10.15.102:10.10.16.102'
    - name: vICSNF_NEIGHBOR_SITE_ROUTE
      # SITE_NAME#ROUTE_NAME:N:N
      value: 'korea#R1:korea\\/seoul\\/dongjak#R1:korea\\/seoul\\/gwanak\\/PF#R1:korea\\/seoul\\/gwanak\\/H#R1'
    - name: vICSNF_AD_PREFIXE
      value: 'korea\\/seoul\\/gwanak'
    - name: vICSNF_ENV_CHANGE
      value: 'NO'
    securityContext:
      privileged: true
    command: ["/bin/bash", "-c", "service ssh restart; /root/start_vicsnf.sh; sleep 1d"]
  nodeSelector:
    kubernetes.io/hostname: vicsnet-core1
